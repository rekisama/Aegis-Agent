# Aegis Agent - æ™ºèƒ½AIä»£ç†ç³»ç»Ÿ

<div align="center">
  <img src="pic/P3RE_Aigis_art.png" alt="Aegis Agent" width="200" height="auto">
</div>

Aegis Agentæ˜¯ä¸€ä¸ªå…ˆè¿›çš„AIä»£ç†æ¡†æ¶ï¼Œå…·å¤‡æ™ºèƒ½ä»»åŠ¡æ‰§è¡Œã€åŠ¨æ€å·¥å…·åˆ›å»ºã€æ™ºèƒ½é”™è¯¯å¤„ç†å’Œè‡ªåŠ¨ä¿®å¤èƒ½åŠ›ã€‚

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![çŠ¶æ€](https://img.shields.io/badge/Status-Active-brightgreen.svg)]()

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

### ğŸ§  æ™ºèƒ½é”™è¯¯å¤„ç†
- **è‡ªåŠ¨é”™è¯¯åˆ†æ**: LLMé©±åŠ¨çš„é”™è¯¯è¯Šæ–­å’Œä¿®å¤å»ºè®®
- **æ™ºèƒ½ä»£ç ä¿®å¤**: è‡ªåŠ¨ä¿®å¤Pythonä»£ç ä¸­çš„å¸¸è§é”™è¯¯ï¼ˆå¦‚ç¼ºå°‘å¯¼å…¥ï¼‰
- **å·¥å…·ä»£ç è‡ªä¿®å¤**: åŠ¨æ€å·¥å…·æ‰§è¡Œå¤±è´¥æ—¶è‡ªåŠ¨ä¿®å¤å·¥å…·ä»£ç 
- **ä»»åŠ¡é‡åˆ†æ**: åŸºäºé”™è¯¯ä¸Šä¸‹æ–‡é‡æ–°åˆ†æå’Œè§„åˆ’ä»»åŠ¡æ‰§è¡Œ

### ğŸ”§ åŠ¨æ€å·¥å…·ç³»ç»Ÿ
- **è‡ªç„¶è¯­è¨€å·¥å…·åˆ›å»º**: ç”¨è‡ªç„¶è¯­è¨€æè¿°å³å¯åˆ›å»ºæ–°å·¥å…·
- **LLMå·¥å…·è§„èŒƒéªŒè¯**: æ™ºèƒ½éªŒè¯å·¥å…·ä»£ç çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§
- **å·¥å…·ä»£ç è‡ªåŠ¨æ›´æ–°**: æ”¯æŒè¿è¡Œæ—¶æ›´æ–°å’Œä¿®å¤å·¥å…·ä»£ç 
- **å·¥å…·é“¾ç®¡ç†**: æ”¯æŒå·¥å…·é“¾çš„åˆ›å»ºå’Œæ‰§è¡Œ

### ğŸ›¡ï¸ å®‰å…¨éªŒè¯æœºåˆ¶
- **å¤šå±‚å®‰å…¨æ£€æŸ¥**: LLMéªŒè¯ + æœ¬åœ°å…³é”®è¯æ£€æµ‹
- **å±é™©æ“ä½œæ‹¦æˆª**: è‡ªåŠ¨æ£€æµ‹å’Œé˜»æ­¢å±é™©ä»£ç æ‰§è¡Œ
- **å‚æ•°å®Œæ•´æ€§éªŒè¯**: ç¡®ä¿å·¥å…·å‚æ•°å®šä¹‰å®Œæ•´
- **åŠŸèƒ½åˆç†æ€§æ£€æŸ¥**: éªŒè¯å·¥å…·åŠŸèƒ½çš„åˆç†æ€§

### ğŸ’¾ æŒä¹…åŒ–è®°å¿†
- **é•¿æœŸè®°å¿†**: è·¨ä¼šè¯çš„è®°å¿†ä¿æŒ
- **ä¸Šä¸‹æ–‡ç®¡ç†**: æ™ºèƒ½ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œä¿æŒ
- **å¯¹è¯å†å²**: è‡ªåŠ¨ä¿å­˜å’ŒåŠ è½½å¯¹è¯å†å²

### ğŸŒ ç°ä»£åŒ–Webç•Œé¢
- **å®æ—¶WebSocketé€šä¿¡**: å®æ—¶åŒå‘é€šä¿¡
- **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **å®æ—¶æ‰§è¡Œç›‘æ§**: æ˜¾ç¤ºAgentçš„å®æ—¶æ‰§è¡Œè¿‡ç¨‹
- **æ–‡ä»¶ä¸Šä¼ æ”¯æŒ**: æ”¯æŒæ–‡ä»¶ä¸Šä¼ å’Œå¤„ç†

## ğŸ“‹ ç›®å½•

- [å®‰è£…](#å®‰è£…)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [Webç•Œé¢](#webç•Œé¢)
- [é…ç½®](#é…ç½®)
- [APIæ–‡æ¡£](#apiæ–‡æ¡£)
- [å·¥å…·ç³»ç»Ÿ](#å·¥å…·ç³»ç»Ÿ)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)

## ğŸ› ï¸ å®‰è£…

### ç³»ç»Ÿè¦æ±‚
- Python 3.8+
- Git
- ç½‘ç»œè¿æ¥ï¼ˆç”¨äºAPIè°ƒç”¨ï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/rekisama/Aegis-Agent.git
cd Aegis-Agent
```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**
```bash
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# æˆ–
.venv\Scripts\activate     # Windows
```

3. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

4. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„APIå¯†é’¥
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‘½ä»¤è¡Œæ¨¡å¼

1. **å¯åŠ¨ä»£ç†**
```bash
python main.py
```

2. **äº¤äº’æ¨¡å¼**
```
Aegis Agent > å¸®æˆ‘è®¡ç®—2çš„100æ¬¡æ–¹
Aegis Agent > åˆ›å»ºä¸€ä¸ªå·¥å…·æ¥è¯»å–ç½‘é¡µæ ‡é¢˜
Aegis Agent > ä¿®å¤è¿™ä¸ªPythonä»£ç ä¸­çš„é”™è¯¯
```

### Webç•Œé¢æ¨¡å¼

1. **å¯åŠ¨WebæœåŠ¡å™¨**
```bash
python web/start_server.py
```

2. **è®¿é—®Webç•Œé¢**
æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8000`

3. **å¼€å§‹æ™ºèƒ½å¯¹è¯**
- åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ä»»åŠ¡
- å®æ—¶æŸ¥çœ‹æ‰§è¡Œè¿‡ç¨‹å’Œé”™è¯¯å¤„ç†
- è‡ªåŠ¨ä¿å­˜å¯¹è¯å†å²

## ğŸ§  æ ¸å¿ƒåŠŸèƒ½

### æ™ºèƒ½é”™è¯¯å¤„ç†

Aegis Agentå…·å¤‡å¼ºå¤§çš„é”™è¯¯å¤„ç†èƒ½åŠ›ï¼š

```python
# è‡ªåŠ¨ä¿®å¤ä»£ç é”™è¯¯
Aegis Agent > æ‰§è¡Œè¿™æ®µä»£ç ï¼šimport re; print(re.findall(r'\d+', 'abc123def456'))

# ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤é”™è¯¯
# å¦‚æœç¼ºå°‘å¯¼å…¥ï¼Œä¼šè‡ªåŠ¨æ·»åŠ 
# å¦‚æœè¯­æ³•é”™è¯¯ï¼Œä¼šè‡ªåŠ¨ä¿®å¤
```

### åŠ¨æ€å·¥å…·åˆ›å»º

ç”¨è‡ªç„¶è¯­è¨€åˆ›å»ºæ–°å·¥å…·ï¼š

```python
# åˆ›å»ºç½‘é¡µæ ‡é¢˜è¯»å–å·¥å…·
Aegis Agent > åˆ›å»ºä¸€ä¸ªå·¥å…·æ¥è¯»å–ç½‘é¡µçš„æ ‡é¢˜

# ç³»ç»Ÿä¼šï¼š
# 1. åˆ†æéœ€æ±‚
# 2. ç”Ÿæˆå·¥å…·ä»£ç 
# 3. éªŒè¯å®‰å…¨æ€§
# 4. æ³¨å†Œå·¥å…·
# 5. æä¾›ä½¿ç”¨ç¤ºä¾‹
```

### å·¥å…·è§„èŒƒéªŒè¯

ç³»ç»Ÿä½¿ç”¨LLMéªŒè¯å·¥å…·è§„èŒƒï¼š

- **ä»£ç å®‰å…¨æ€§æ£€æŸ¥**: æ£€æµ‹å±é™©æ“ä½œï¼ˆeval, exec, os.systemç­‰ï¼‰
- **å‚æ•°å®Œæ•´æ€§éªŒè¯**: ç¡®ä¿å·¥å…·å‚æ•°å®šä¹‰å®Œæ•´
- **åŠŸèƒ½åˆç†æ€§æ£€æŸ¥**: éªŒè¯å·¥å…·åŠŸèƒ½çš„åˆç†æ€§
- **å‘½åè§„èŒƒæ€§æ£€æŸ¥**: ç¡®ä¿å‘½åç¬¦åˆPythonè§„èŒƒ

### è‡ªåŠ¨ä»£ç ä¿®å¤

å½“å·¥å…·æ‰§è¡Œå¤±è´¥æ—¶ï¼Œç³»ç»Ÿä¼šï¼š

1. **åˆ†æé”™è¯¯**: ä½¿ç”¨LLMåˆ†æé”™è¯¯åŸå› 
2. **ç”Ÿæˆä¿®å¤**: è‡ªåŠ¨ç”Ÿæˆä¿®å¤ä»£ç 
3. **æ›´æ–°å·¥å…·**: è‡ªåŠ¨æ›´æ–°å·¥å…·ä»£ç 
4. **é‡æ–°æ‰§è¡Œ**: ä½¿ç”¨ä¿®å¤åçš„ä»£ç é‡æ–°æ‰§è¡Œ

## ğŸŒ Webç•Œé¢

### ç•Œé¢ç‰¹æ€§
- **å®æ—¶æ‰§è¡Œç›‘æ§**: æ˜¾ç¤ºAgentçš„å®æ—¶æ‰§è¡Œè¿‡ç¨‹
- **é”™è¯¯å¤„ç†å¯è§†åŒ–**: å®æ—¶æ˜¾ç¤ºé”™è¯¯åˆ†æå’Œä¿®å¤è¿‡ç¨‹
- **å·¥å…·åˆ›å»ºç•Œé¢**: å¯è§†åŒ–å·¥å…·åˆ›å»ºå’ŒéªŒè¯è¿‡ç¨‹
- **å¯¹è¯ç®¡ç†**: è‡ªåŠ¨ä¿å­˜å’ŒåŠ è½½å¯¹è¯å†å²
- **æ–‡ä»¶ä¸Šä¼ **: æ”¯æŒæ–‡ä»¶ä¸Šä¼ å’Œå¤„ç†

### åŠŸèƒ½æ¼”ç¤º
1. **æ™ºèƒ½ä»»åŠ¡æ‰§è¡Œ**: è¾“å…¥å¤æ‚ä»»åŠ¡ï¼Œè§‚çœ‹æ™ºèƒ½åˆ†æå’Œæ‰§è¡Œ
2. **åŠ¨æ€å·¥å…·åˆ›å»º**: ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼Œè‡ªåŠ¨åˆ›å»ºå·¥å…·
3. **é”™è¯¯è‡ªåŠ¨ä¿®å¤**: æ•…æ„è¾“å…¥é”™è¯¯ä»£ç ï¼Œè§‚å¯Ÿè‡ªåŠ¨ä¿®å¤è¿‡ç¨‹
4. **å·¥å…·é“¾æ‰§è¡Œ**: åˆ›å»ºå’Œæ‰§è¡Œå¤æ‚çš„å·¥å…·é“¾

## âš™ï¸ é…ç½®

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# LLM APIé…ç½®
DEEPSEEK_API_KEY=your_deepseek_api_key
DEEPSEEK_API_BASE=https://api.deepseek.com/v1

# å·¥å…·é…ç½®
SEARXNG_URL=https://searxng.example.com
SEARXNG_API_KEY=your_searxng_api_key

# ç³»ç»Ÿé…ç½®
LOG_LEVEL=INFO
MEMORY_ENABLED=true
AUTO_FIX_ENABLED=true
MAX_RETRIES=3
```

### é”™è¯¯å¤„ç†é…ç½®

```python
# åœ¨ä»£ç ä¸­é…ç½®é”™è¯¯å¤„ç†å‚æ•°
agent.set_auto_fix_enabled(True)  # å¯ç”¨è‡ªåŠ¨ä¿®å¤
agent.set_max_retries(3)          # è®¾ç½®æœ€å¤§é‡è¯•æ¬¡æ•°
agent.set_verbose_logging(True)    # å¯ç”¨è¯¦ç»†æ—¥å¿—
```

## ğŸ“š APIæ–‡æ¡£

### WebSocket API

#### è¿æ¥
```javascript
const ws = new WebSocket('ws://localhost:8000/ws');
```

#### å‘é€æ¶ˆæ¯
```javascript
ws.send(JSON.stringify({
  type: 'chat',
  message: 'ä½ çš„ä»»åŠ¡æè¿°'
}));
```

#### æ¥æ”¶æ¶ˆæ¯
```javascript
ws.onmessage = function(event) {
  const data = JSON.parse(event.data);
  switch(data.type) {
    case 'task_completed':
      console.log('ä»»åŠ¡å®Œæˆ:', data.result);
      break;
    case 'execution_log':
      console.log('æ‰§è¡Œæ—¥å¿—:', data.message);
      break;
    case 'error_analysis':
      console.log('é”™è¯¯åˆ†æ:', data.analysis);
      break;
    case 'auto_fix_applied':
      console.log('è‡ªåŠ¨ä¿®å¤:', data.fix);
      break;
  }
};
```

### HTTP API

#### åˆ›å»ºå·¥å…·
```bash
curl -X POST http://localhost:8000/api/create_tool \
  -H "Content-Type: application/json" \
  -d '{
    "name": "web_title_reader",
    "description": "è¯»å–ç½‘é¡µæ ‡é¢˜çš„å·¥å…·",
    "code": "import requests\nfrom bs4 import BeautifulSoup\n\ndef get_title(url):\n    response = requests.get(url)\n    soup = BeautifulSoup(response.text, 'html.parser')\n    return soup.title.string",
    "parameters": {"url": "ç½‘é¡µURL"}
  }'
```

#### æ‰§è¡Œå·¥å…·
```bash
curl -X POST http://localhost:8000/api/execute_tool \
  -H "Content-Type: application/json" \
  -d '{
    "tool_name": "web_title_reader",
    "parameters": {"url": "https://example.com"}
  }'
```

## ğŸ”§ å·¥å…·ç³»ç»Ÿ

### å†…ç½®å·¥å…·

| å·¥å…·åç§° | æè¿° | å‚æ•° |
|---------|------|------|
| `code` | æ‰§è¡ŒPythonä»£ç ï¼ˆå¸¦è‡ªåŠ¨ä¿®å¤ï¼‰ | `code`: ä»£ç å­—ç¬¦ä¸² |
| `terminal` | æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ | `command`: å‘½ä»¤å­—ç¬¦ä¸² |
| `search` | ç½‘ç»œæœç´¢ | `query`: æœç´¢æŸ¥è¯¢ |
| `file_reader` | è¯»å–æ–‡ä»¶å†…å®¹ | `file_path`: æ–‡ä»¶è·¯å¾„ |
| `web_reader` | ç½‘é¡µå†…å®¹è¯»å– | `url`: ç½‘é¡µURL |

### åŠ¨æ€å·¥å…·

ç³»ç»Ÿæ”¯æŒåŠ¨æ€åˆ›å»ºå’Œç®¡ç†å·¥å…·ï¼š

```python
# åˆ›å»ºåŠ¨æ€å·¥å…·
tool_spec = {
    "name": "data_analyzer",
    "description": "æ•°æ®åˆ†æå·¥å…·",
    "code": """
import pandas as pd
import matplotlib.pyplot as plt

def analyze_data(file_path):
    df = pd.read_csv(file_path)
    summary = df.describe()
    return summary.to_dict()
    """,
    "parameters": {"file_path": "CSVæ–‡ä»¶è·¯å¾„"}
}

# ç³»ç»Ÿä¼šè‡ªåŠ¨éªŒè¯å’Œæ³¨å†Œå·¥å…·
```

### å·¥å…·éªŒè¯æµç¨‹

1. **LLMéªŒè¯**: ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹åˆ†æä»£ç è´¨é‡å’Œå®‰å…¨æ€§
2. **æœ¬åœ°å®‰å…¨æ£€æŸ¥**: å¿«é€Ÿæ£€æµ‹å±é™©å…³é”®è¯
3. **å‚æ•°éªŒè¯**: ç¡®ä¿å‚æ•°å®šä¹‰å®Œæ•´
4. **åŠŸèƒ½éªŒè¯**: éªŒè¯å·¥å…·åŠŸèƒ½çš„åˆç†æ€§

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
Aegis Agent/
â”œâ”€â”€ python/
â”‚   â”œâ”€â”€ agent/              # ä»£ç†æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ smart_error_core.py    # æ™ºèƒ½é”™è¯¯å¤„ç†æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ error_handler.py       # é”™è¯¯å¤„ç†ä»£ç†
â”‚   â”‚   â”œâ”€â”€ dynamic_tool_creator.py # åŠ¨æ€å·¥å…·åˆ›å»ºå™¨
â”‚   â”‚   â””â”€â”€ enhanced_tool_manager.py # å¢å¼ºå·¥å…·ç®¡ç†å™¨
â”‚   â”œâ”€â”€ tools/              # å·¥å…·ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ dynamic/        # åŠ¨æ€å·¥å…·ç›®å½•
â”‚   â”‚   â”œâ”€â”€ enhanced_terminal.py   # å¢å¼ºç»ˆç«¯å·¥å…·
â”‚   â”‚   â””â”€â”€ web_reader.py   # ç½‘é¡µè¯»å–å·¥å…·
â”‚   â”œâ”€â”€ llm/               # LLMå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ memory/            # è®°å¿†ç®¡ç†
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ web/                   # Webç•Œé¢
â”‚   â”œâ”€â”€ templates/         # HTMLæ¨¡æ¿
â”‚   â””â”€â”€ main.py           # FastAPIåº”ç”¨
â”œâ”€â”€ examples/              # ç¤ºä¾‹è„šæœ¬
â””â”€â”€ tests/                # æµ‹è¯•æ–‡ä»¶
```

### æ·»åŠ æ–°å·¥å…·

1. **åˆ›å»ºå·¥å…·ç±»**
```python
# python/tools/custom_tool.py
from .base import BaseTool

class CustomTool(BaseTool):
    name = "custom_tool"
    description = "è‡ªå®šä¹‰å·¥å…·æè¿°"
    
    async def execute(self, **kwargs):
        # å®ç°å·¥å…·é€»è¾‘
        return ToolResult(success=True, data={"result": "ç»“æœ"})
```

2. **æ³¨å†Œå·¥å…·**
```json
// python/tools/custom_tool_metadata.json
{
  "name": "custom_tool",
  "description": "è‡ªå®šä¹‰å·¥å…·æè¿°",
  "parameters": {
    "param1": {
      "type": "string",
      "description": "å‚æ•°æè¿°"
    }
  }
}
```

### é”™è¯¯å¤„ç†å¼€å‘

```python
# è‡ªå®šä¹‰é”™è¯¯å¤„ç†å™¨
from python.agent.error_handler import ErrorHandlerAgent

class CustomErrorHandler(ErrorHandlerAgent):
    async def handle_custom_error(self, error_context):
        # è‡ªå®šä¹‰é”™è¯¯å¤„ç†é€»è¾‘
        pass
```

### è¿è¡Œæµ‹è¯•
```bash
python -m pytest tests/
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (å½“å‰ç‰ˆæœ¬)
- âœ¨ æ–°å¢æ™ºèƒ½é”™è¯¯å¤„ç†ç³»ç»Ÿ
- âœ¨ æ–°å¢åŠ¨æ€å·¥å…·åˆ›å»ºåŠŸèƒ½
- âœ¨ æ–°å¢LLMå·¥å…·è§„èŒƒéªŒè¯
- âœ¨ æ–°å¢è‡ªåŠ¨ä»£ç ä¿®å¤åŠŸèƒ½
- âœ¨ æ–°å¢å·¥å…·ä»£ç è‡ªä¿®å¤èƒ½åŠ›
- âœ¨ æ–°å¢ä»»åŠ¡é‡åˆ†æåŠŸèƒ½
- ğŸ”§ ä¼˜åŒ–Webç•Œé¢å’Œç”¨æˆ·ä½“éªŒ
- ğŸ›¡ï¸ å¢å¼ºå®‰å…¨éªŒè¯æœºåˆ¶

### v1.0.0
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ¨ åŸºç¡€AIä»£ç†åŠŸèƒ½
- âœ¨ Webç•Œé¢
- âœ¨ åŸºç¡€å·¥å…·ç³»ç»Ÿ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

---

<div align="center">
  <strong>Aegis Agent - è®©AIä»£ç†æ›´æ™ºèƒ½ï¼Œè®©é”™è¯¯å¤„ç†æ›´ä¼˜é›…</strong>
</div>

